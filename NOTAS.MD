BasÃ¡ndome en el anÃ¡lisis del cÃ³digo y la documentaciÃ³n existente, aquÃ­ estÃ¡ mi anÃ¡lisis y plan detallado para la separaciÃ³n de roles:
ğŸ“Š AnÃ¡lisis de Permisos Actuales en el Backend
SegÃºn el cÃ³digo actual, los permisos estÃ¡n asÃ­:
ADMIN (Acceso completo)
âœ… GestiÃ³n de usuarios (crear, editar, desactivar)
âœ… Todas las operaciones de SUPERVISOR
âœ… Todas las operaciones de TÃ‰CNICO
âœ… Ver auditorÃ­a completa
SUPERVISOR (GestiÃ³n y visualizaciÃ³n)
âœ… Crear/editar/eliminar NAPs
âœ… Crear/editar/eliminar clientes
âœ… Crear/editar/eliminar planes
âœ… Crear/finalizar conexiones
âœ… Crear puertos para NAPs
âœ… Ver todos los reportes
âœ… Ver auditorÃ­a
âŒ GestiÃ³n de usuarios
âŒ Editar puertos directamente
âŒ Registrar mantenimientos
TÃ‰CNICO (Operaciones de campo)
âœ… Ver NAPs (consulta)
âœ… Actualizar NAPs
âœ… Editar puertos (asignar/liberar clientes)
âœ… Actualizar conexiones
âœ… Crear/editar mantenimientos
âŒ Crear/eliminar NAPs
âŒ Crear/eliminar clientes
âŒ Crear/eliminar planes
âŒ Finalizar conexiones
âŒ Ver reportes avanzados
âŒ Ver auditorÃ­a
âŒ GestiÃ³n de usuarios
ğŸ¯ Plan Propuesto para Frontend

1. ADMIN (Administrador del Sistema)
   Rol: Control total del sistema Puede hacer:
   âœ… Gestionar usuarios (crear, editar, desactivar, cambiar roles)
   âœ… Ver y exportar auditorÃ­a completa
   âœ… Generar todos los reportes (PDF/Excel)
   âœ… Ver estadÃ­sticas y dashboards completos
   âœ… Crear/editar/eliminar NAPs
   âœ… Crear/editar/eliminar clientes
   âœ… Crear/editar/eliminar planes
   âœ… Gestionar conexiones (crear, editar, finalizar)
   âœ… Gestionar puertos (crear, editar, asignar, liberar)
   âœ… Ver y gestionar mantenimientos
   âœ… Ver notificaciones/alertas
   âœ… Acceso a todas las secciones del sistema
   En el frontend mostrar:
   Todos los menÃºs y secciones
   Todos los botones de acciÃ³n
   SecciÃ³n "Usuarios"
   SecciÃ³n "AuditorÃ­a"
   Todos los reportes
2. SUPERVISOR (Supervisor de Operaciones)
   Rol: Gestiona la infraestructura y clientes, genera reportes Puede hacer:
   âœ… Ver mapa con NAPs
   âœ… Crear/editar/eliminar NAPs
   âœ… Crear/editar/eliminar clientes
   âœ… Crear/editar/eliminar planes
   âœ… Crear/finalizar conexiones de clientes
   âœ… Ver estado de puertos (solo consulta)
   âœ… Ver lista de mantenimientos (solo consulta)
   âœ… Generar reportes (ocupaciÃ³n, consumo, tÃ©cnico)
   âœ… Ver y exportar auditorÃ­a
   âœ… Ver notificaciones/alertas
   âœ… Ver estadÃ­sticas del sistema
   âŒ Gestionar usuarios
   âŒ Editar puertos directamente (asignar/liberar)
   âŒ Registrar mantenimientos
   En el frontend ocultar/desactivar:
   âŒ MenÃº "Usuarios"
   âŒ Botones de "Asignar Cliente" y "Liberar Puerto" en mapa
   âŒ Botones "Crear/Editar/Eliminar" en mantenimientos
   âœ… Puede ver mantenimientos pero no crearlos/editarlos
3. TÃ‰CNICO (TÃ©cnico de Campo)
   Rol: Ejecuta trabajo de campo, actualiza NAPs y registra mantenimientos Puede hacer:
   âœ… Ver mapa con NAPs
   âœ… Ver detalles de NAPs
   âœ… Actualizar informaciÃ³n de NAPs (estado, observaciones)
   âœ… Ver lista de clientes (solo consulta)
   âœ… Asignar/liberar puertos a clientes
   âœ… Actualizar estado de conexiones
   âœ… Crear/editar/eliminar mantenimientos
   âœ… Ver notificaciones/alertas
   âŒ Crear/eliminar NAPs
   âŒ Crear/editar/eliminar clientes
   âŒ Crear/editar/eliminar planes
   âŒ Crear/finalizar conexiones
   âŒ Ver reportes avanzados
   âŒ Ver auditorÃ­a
   âŒ Gestionar usuarios
   En el frontend ocultar/desactivar:
   âŒ MenÃº "Usuarios"
   âŒ MenÃº "AuditorÃ­a"
   âŒ MenÃº "Reportes"
   âŒ MenÃº "Planes"
   âŒ BotÃ³n "Crear NAP" en mapa
   âŒ BotÃ³n "Eliminar NAP" en detalles
   âŒ Botones "Crear/Editar/Eliminar" en clientes
   âŒ SecciÃ³n de estadÃ­sticas en mapa
   âœ… Solo puede ver mapa, NAPs, puertos, mantenimientos
   ğŸ“‹ ImplementaciÃ³n TÃ©cnica
   Archivos a modificar:
   frontend/src/app/stores/auth.store.ts
   AÃ±adir computed signals para permisos:
   isAdmin()
   isSupervisor()
   isTecnico()
   canManageUsers()
   canViewAuditoria()
   canGenerateReports()
   canCreateNAP()
   canDeleteNAP()
   canManageClients()
   canManagePlanes()
   canManageConnections()
   canEditPorts()
   canManageMaintenances()
   frontend/src/app/app.routes.ts
   AÃ±adir guards de navegaciÃ³n basados en rol
   Bloquear acceso a rutas segÃºn permisos
   Componentes a actualizar:
   mapa-new.html: Ocultar botones segÃºn rol
   usuarios/: Solo visible para ADMIN
   auditoria/: Solo ADMIN y SUPERVISOR
   Sidebar/Navigation: Mostrar solo menÃºs permitidos
   NAPs detalle: Condicionar botones de editar/eliminar
   Clientes: Condicionar CRUD segÃºn rol
   Planes: Condicionar CRUD segÃºn rol
   Mantenimientos: TÃ‰CNICO puede crear, SUPERVISOR solo ver
   Reportes: Solo ADMIN y SUPERVISOR
   Crear servicio de permisos:
   frontend/src/app/services/permissions.service.ts
   Centralizar lÃ³gica de permisos
   Inyectar en componentes
   ğŸ” Resumen de Diferencias Clave
   Funcionalidad ADMIN SUPERVISOR TÃ‰CNICO
   Gestionar usuarios âœ… âŒ âŒ
   Ver auditorÃ­a âœ… âœ… âŒ
   Generar reportes âœ… âœ… âŒ
   Crear/Eliminar NAPs âœ… âœ… âŒ
   Actualizar NAPs âœ… âœ… âœ…
   Gestionar clientes âœ… âœ… âŒ (solo ver)
   Gestionar planes âœ… âœ… âŒ (solo ver)
   Crear conexiones âœ… âœ… âŒ
   Asignar/liberar puertos âœ… âŒ âœ…
   Crear mantenimientos âœ… âŒ âœ…
   Ver estadÃ­sticas âœ… âœ… âŒ
   Â¿Te parece bien esta distribuciÃ³n de permisos? Â¿Quieres que proceda con la implementaciÃ³n o prefieres ajustar algÃºn permiso antes?
